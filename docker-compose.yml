services:
  openclaw-gateway:
    image: ghcr.io/openclaw/openclaw
    container_name: openclaw-agentic
    environment:
      HOME: /home/node
      TERM: xterm-256color
      OPENCLAW_GATEWAY_TOKEN=${OPENCLAW_GATEWAY_TOKEN}
      DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}
      OLLAMA_BASE_URL=${OLLAMA_BASE_URL}
      OLLAMA_MODEL=${OLLAMA_MODEL}
      OLLAMA_API_KEY=ollama-local
      BRAVE_API_KEY=${BRAVE_API_KEY} 
    volumes:
      - openclaw_data:/home/node/.openclaw
      - openclaw_workspace:/home/node/.openclaw/workspace
    ports:
      - "${OPENCLAW_GATEWAY_PORT:-18789}:18789"
      - "${OPENCLAW_BRIDGE_PORT:-18790}:18790"
    init: true
    restart: unless-stopped
    command:
      [
        "node",
        "dist/index.js",
        "gateway",
        "--bind",
        "${OPENCLAW_GATEWAY_BIND:-lan}",
        "--port",
        "18789",
      ]

  # The Browser Service (Remote CDP Endpoint)
  browser:
    image: browserless/chrome:latest
    container_name: openclaw-browser
    shm_size: '2gb'
    environment:
      - MAX_CONCURRENT_SESSIONS=10
      - CONNECTION_TIMEOUT=60000
      - MAX_QUEUE_LENGTH=20
      - HOST=0.0.0.0
      - PORT=3000
      - SCREEN_WIDTH=1920
      - SCREEN_HEIGHT=1080
    restart: unless-stopped
    ports:
      - "3000:3000"
      
volumes:
  openclaw_data:
  openclaw_workspace:
