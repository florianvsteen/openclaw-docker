services:
  openclaw:
    container_name: openclaw-agentic
    build:
      context: .
      args:
        EXTRA_APT_PACKAGES: ""  # Add apt packages here, e.g. "python3 python3-pip"
    ports:
      - "${OPENCLAW_BIND_HOST:-127.0.0.1}:18789:18789"
    volumes:
      - ./data:/root/.openclaw        # Persistent config + conversations
      - ./workspace:/root/openclaw        # Workspace + skills
    environment:
      - OPENCLAW_GATEWAY_TOKEN=${OPENCLAW_GATEWAY_TOKEN}
      - DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}
      - OLLAMA_BASE_URL=${OLLAMA_BASE_URL}
      - OLLAMA_MODEL=${OLLAMA_MODEL}
      - OLLAMA_API_KEY=ollama-local
    restart: unless-stopped

  # The Browser Service (Remote CDP Endpoint)
  browser:
    container_name: openclaw-browser
    image: ghcr.io/steel-dev/steel-browser
    ports:
      - "3000:3000"
      - "9223:9223"
    shm_size: 2g
    restart: unless-stopped
