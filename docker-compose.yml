services:
  openclaw:
    build:
      context: .
      args:
        EXTRA_APT_PACKAGES: ""  # Add apt packages here, e.g. "python3 python3-pip"
    ports:
      - "${OPENCLAW_BIND_HOST:-127.0.0.1}:18900:18789"
    volumes:
      - ./data:/root/.clawdbot        # Persistent config + conversations
      - ./workspace:/root/clawd        # Workspace + skills
    environment:
      - OPENCLAW_GATEWAY_TOKEN=${OPENCLAW_GATEWAY_TOKEN}
      - DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}
    shm_size: '2gb'  # Chromium needs more than Docker's default 64MB /dev/shm
    restart: unless-stopped
