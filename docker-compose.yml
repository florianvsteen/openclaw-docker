services:
  openclaw:
    container_name: openclaw-agentic
    build:
      context: .
      args:
        EXTRA_APT_PACKAGES: ""  # Add apt packages here, e.g. "python3 python3-pip"
    ports:
      #Openclaw UI
      - "18789:18789"
      #Charts Mission Control
      - "6767:6767"
    volumes:
      - openclaw_data:/root/.openclaw      # Using named volume for config
      - openclaw_workspace:/root/openclaw  # Using named volume for workspace
    environment:
      - OPENCLAW_GATEWAY_TOKEN=${OPENCLAW_GATEWAY_TOKEN}
      - DATABENTO_API_KEY=${DATABENTO_API_KEY}
      - DISCORD_WEBHOOK_URL=${DISCORD_WEBHOOK_URL}
      - OPENCLAW_SKIP_SERVICE_CHECK=true
      - DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}
      - OLLAMA_BASE_URL=${OLLAMA_BASE_URL}
      - OLLAMA_MODEL=${OLLAMA_MODEL}
      - OLLAMA_API_KEY=ollama-local
      - BRAVE_API_KEY=${BRAVE_API_KEY}
      - UI_LANG=en-US
      - TZ=Europe/Brussels
      - MT5_API_URL=${MT5_API_URL}
      - DATA_PROVIDER=${DATA_PROVIDER}
      - MT5_API_USER=${MT5_API_USER}
      - MT5_API_PASSWORD=${MT5_API_PASSWORD}
      - MT5_API_SERVER=${MT5_API_SERVER}
    restart: unless-stopped

  # The Browser Service (Remote CDP Endpoint)
  browser:
    image: browserless/chrome:latest
    container_name: openclaw-browser
    shm_size: '2gb'
    environment:
      - MAX_CONCURRENT_SESSIONS=10
      - CONNECTION_TIMEOUT=60000
      - MAX_QUEUE_LENGTH=20
      - HOST=0.0.0.0
      - PORT=3000
      - SCREEN_WIDTH=1920
      - SCREEN_HEIGHT=1080
    restart: unless-stopped
    ports:
      - "3000:3000"
      
volumes:
  openclaw_data:
  openclaw_workspace:
